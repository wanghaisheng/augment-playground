# PandaHabit 设计与实现对齐计划

## 目标

对齐设计与实现之间的差距，补齐缺少的页面，修复页面内区块样式和布局等细节，确保应用整体风格符合华丽游戏风格设计要求，并解决当前布局混乱的问题。

> **注意**：关于布局规范和iOS设计指南，请参考 [PandaHabit 开发与布局规范指南](panda-habit-development-and-layout-guide.md) 文档。

## 优先级定义

- **P0**：阻塞性问题，必须立即解决
- **P1**：高优先级，影响用户体验的核心问题
- **P2**：中优先级，重要但不紧急的问题
- **P3**：低优先级，可以在其他任务完成后处理

## 1. 布局结构规范化

### 1.0 布局规范制定与应用

| ID | 任务 | 优先级 | 状态 | 估计工时(小时) |
|----|------|--------|------|---------------|
| 1.0.1 | 创建`docs/layout-guidelines.md`布局规范文档 | P0 | 待开始 | 6 |
| 1.0.2 | 创建基础布局组件库 | P0 | 待开始 | 8 |
| 1.0.3 | 实现响应式布局工具函数 | P0 | 待开始 | 4 |
| 1.0.4 | 创建布局检查工具 | P1 | 待开始 | 6 |
| 1.0.5 | 应用布局规范到主页 | P0 | 待开始 | 8 |

## 2. 通用组件样式对齐

### 2.1 水墨画风格图标库

| ID | 任务 | 优先级 | 状态 | 估计工时(小时) |
|----|------|--------|------|---------------|
| 2.1.1 | 创建`src/components/icons/InkWashIcon.tsx`基础组件 | P1 | 待开始 | 4 |
| 2.1.2 | 实现常用操作图标（添加、删除、编辑等） | P1 | 待开始 | 6 |
| 2.1.3 | 实现导航图标（主页、任务、设置等） | P1 | 待开始 | 6 |
| 2.1.4 | 实现功能图标（通知、搜索、筛选等） | P2 | 待开始 | 6 |
| 2.1.5 | 实现情绪相关图标（心情选择器用） | P1 | 待开始 | 4 |

### 2.2 传统窗棂样式弹窗

| ID | 任务 | 优先级 | 状态 | 估计工时(小时) |
|----|------|--------|------|---------------|
| 2.2.1 | 优化`TraditionalWindowModal`组件样式 | P1 | 待开始 | 4 |
| 2.2.2 | 更新任务详情弹窗 | P1 | 待开始 | 3 |
| 2.2.3 | 更新反思详情弹窗 | P1 | 待开始 | 3 |
| 2.2.4 | 更新奖励弹窗 | P2 | 待开始 | 3 |
| 2.2.5 | 更新确认弹窗 | P2 | 待开始 | 2 |

### 2.3 华丽游戏风格UI元素

| ID | 任务 | 优先级 | 状态 | 估计工时(小时) |
|----|------|--------|------|---------------|
| 2.3.1 | 创建卷轴式容器组件 | P2 | 待开始 | 5 |
| 2.3.2 | 创建古籍书页式输入组件 | P2 | 待开始 | 5 |
| 2.3.3 | 创建印章式按钮组件 | P2 | 待开始 | 4 |
| 2.3.4 | 创建中国风仪表盘组件 | P2 | 待开始 | 6 |
| 2.3.5 | 创建水墨扩散动画效果 | P3 | 待开始 | 8 |

## 3. 页面布局与样式对齐

### 3.1 主页/家园 (HomePage)

| ID | 任务 | 优先级 | 状态 | 估计工时(小时) |
|----|------|--------|------|---------------|
| 3.1.1 | 修复主页布局结构问题 | P0 | 待开始 | 6 |
| 3.1.2 | 替换所有图标为水墨画风格 | P1 | 待开始 | 3 |
| 3.1.3 | 增强熊猫动画效果和互动反馈 | P2 | 待开始 | 6 |
| 3.1.4 | 重新设计资源显示组件 | P2 | 待开始 | 4 |
| 3.1.5 | 更新弹窗为传统窗棂样式 | P1 | 待开始 | 3 |
| 3.1.6 | 添加水墨风格背景纹理 | P3 | 待开始 | 2 |
| 3.1.7 | 优化主页响应式布局 | P1 | 待开始 | 4 |

### 3.2 任务列表页 (TasksPage)

| ID | 任务 | 优先级 | 状态 | 估计工时(小时) |
|----|------|--------|------|---------------|
| 3.2.1 | 修复任务列表页布局结构问题 | P0 | 待开始 | 6 |
| 3.2.2 | 重新设计筛选器组件 | P2 | 待开始 | 5 |
| 3.2.3 | 更新任务卡片样式 | P1 | 待开始 | 6 |
| 3.2.4 | 替换所有图标为水墨画风格 | P1 | 待开始 | 3 |
| 3.2.5 | 重新设计添加任务按钮 | P2 | 待开始 | 3 |
| 3.2.6 | 实现水墨扩散效果的任务完成动画 | P2 | 待开始 | 5 |
| 3.2.7 | 优化任务列表页响应式布局 | P1 | 待开始 | 4 |

### 3.3 熊猫互动/详情页 (PandaInteractionPage)

| ID | 任务 | 优先级 | 状态 | 估计工时(小时) |
|----|------|--------|------|---------------|
| 3.3.1 | 修复熊猫互动页布局结构问题 | P0 | 待开始 | 6 |
| 3.3.2 | 重新设计页面布局 | P2 | 待开始 | 6 |
| 3.3.3 | 增强熊猫互动动画效果 | P1 | 待开始 | 8 |
| 3.3.4 | 重新设计互动按钮 | P2 | 待开始 | 4 |
| 3.3.5 | 更新状态展示组件 | P2 | 待开始 | 5 |
| 3.3.6 | 优化皮肤选择界面 | P3 | 待开始 | 6 |
| 3.3.7 | 优化熊猫互动页响应式布局 | P1 | 待开始 | 4 |

### 3.4 心情打卡/反思模块 (MoodCheckPage)

| ID | 任务 | 优先级 | 状态 | 估计工时(小时) |
|----|------|--------|------|---------------|
| 3.4.1 | 修复心情打卡页布局结构问题 | P0 | 待开始 | 6 |
| 3.4.2 | 重构`TeaRoomPage`为`MoodCheckPage` | P1 | 进行中 | 8 |
| 3.4.3 | 创建水墨画风格的心情选择器组件 | P1 | 进行中 | 6 |
| 3.4.4 | 重新设计反思输入组件 | P2 | 待开始 | 5 |
| 3.4.5 | 实现卷轴式历史记录展示 | P2 | 待开始 | 6 |
| 3.4.6 | 添加水墨扩散动画效果到提交按钮 | P3 | 待开始 | 4 |
| 3.4.7 | 优化心情打卡页响应式布局 | P1 | 待开始 | 4 |

## 4. 缺失页面实现

### 4.1 个人资料/设置页

| ID | 任务 | 优先级 | 状态 | 估计工时(小时) |
|----|------|--------|------|---------------|
| 4.1.1 | 创建`src/components/profile/UserInfoSection.tsx` | P1 | 待开始 | 5 |
| 4.1.2 | 创建`src/components/profile/UserStatsSection.tsx` | P1 | 待开始 | 5 |
| 4.1.3 | 创建`src/components/profile/AchievementsSection.tsx` | P1 | 待开始 | 6 |
| 4.1.4 | 创建`src/pages/ProfilePage.tsx` | P1 | 待开始 | 8 |
| 4.1.5 | 更新`src/pages/SettingsPage.tsx` | P1 | 待开始 | 6 |
| 4.1.6 | 确保个人资料页布局符合规范 | P0 | 待开始 | 4 |
| 4.1.7 | 优化个人资料页响应式布局 | P1 | 待开始 | 4 |

### 4.2 VIP特权总览页

| ID | 任务 | 优先级 | 状态 | 估计工时(小时) |
|----|------|--------|------|---------------|
| 4.2.1 | 重新设计`src/pages/VipBenefitsPage.tsx` | P2 | 待开始 | 8 |
| 4.2.2 | 创建`src/components/vip/BenefitCard.tsx` | P2 | 待开始 | 4 |
| 4.2.3 | 创建`src/components/vip/ValueComparison.tsx` | P2 | 待开始 | 5 |
| 4.2.4 | 实现动态特效和价值展示 | P2 | 待开始 | 6 |
| 4.2.5 | 确保VIP特权页布局符合规范 | P0 | 待开始 | 4 |
| 4.2.6 | 优化VIP特权页响应式布局 | P1 | 待开始 | 4 |

### 4.3 订阅选择页

| ID | 任务 | 优先级 | 状态 | 估计工时(小时) |
|----|------|--------|------|---------------|
| 4.3.1 | 创建`src/components/subscription/SubscriptionPlanCard.tsx` | P2 | 待开始 | 5 |
| 4.3.2 | 创建`src/components/subscription/BonusGiftSection.tsx` | P2 | 待开始 | 4 |
| 4.3.3 | 创建`src/pages/SubscriptionPage.tsx` | P2 | 待开始 | 8 |
| 4.3.4 | 实现动画效果和礼品展示 | P3 | 待开始 | 6 |
| 4.3.5 | 确保订阅选择页布局符合规范 | P0 | 待开始 | 4 |
| 4.3.6 | 优化订阅选择页响应式布局 | P1 | 待开始 | 4 |

### 4.4 通知中心/消息页

| ID | 任务 | 优先级 | 状态 | 估计工时(小时) |
|----|------|--------|------|---------------|
| 4.4.1 | 创建`src/components/notification/SystemNotificationList.tsx` | P2 | 待开始 | 5 |
| 4.4.2 | 创建`src/components/notification/MessageList.tsx` | P2 | 待开始 | 5 |
| 4.4.3 | 创建`src/pages/NotificationPage.tsx` | P2 | 待开始 | 8 |
| 4.4.4 | 实现竹简信件风格和动画效果 | P3 | 待开始 | 6 |
| 4.4.5 | 确保通知中心页布局符合规范 | P0 | 待开始 | 4 |
| 4.4.6 | 优化通知中心页响应式布局 | P1 | 待开始 | 4 |

## 5. 实施计划

### 5.1 第一阶段（1-2周）

**重点**：布局规范和高优先级页面

1. 创建布局规范文档和基础布局组件库
2. 修复主要页面的布局结构问题
3. 创建水墨画风格图标库基础组件和常用图标
4. 优化传统窗棂样式弹窗组件
5. 完成心情打卡/反思模块的实现
6. 开始个人资料/设置页的实现

### 5.2 第二阶段（2-3周）

**重点**：完善页面样式和响应式布局

1. 完成所有页面的响应式布局优化
2. 完成个人资料/设置页的实现
3. 完成熊猫互动/详情页的样式更新
4. 创建华丽游戏风格UI元素
5. 开始VIP特权总览页和订阅选择页的实现
6. 完成所有页面的图标替换

### 5.3 第三阶段（3-4周）

**重点**：缺失页面和细节优化

1. 完成所有缺失页面的实现
2. 实现水墨扩散动画效果
3. 优化所有页面的细节和交互
4. 进行全面测试和调整

## 6. 注意事项

### 6.1 布局规范

- 所有页面必须遵循布局规范文档
- 确保元素对齐和间距一致
- 使用基础布局组件库构建页面
- 所有页面必须通过布局检查工具验证
- 确保页面在不同屏幕尺寸下正确显示

### 6.2 设计一致性

- 所有页面应保持一致的华丽游戏风格
- 颜色方案应遵循设计文档中的规定
- 字体和排版应保持一致
- 动画效果应有统一的风格和节奏

### 6.3 性能考虑

- 复杂动画应考虑性能影响，提供降级选项
- 图标应优化文件大小，考虑使用SVG
- 大型组件应实现懒加载
- 考虑低性能设备的用户体验

### 6.4 多语言支持

- 所有新组件和页面必须支持多语言
- 使用`useLocalizedView`和`useComponentLabels`钩子获取多语言内容
- 避免硬编码文本
- 测试中英文切换的布局适应性

### 6.5 可访问性

- 确保所有交互元素有足够的点击区域
- 提供适当的对比度
- 考虑色盲用户的体验
- 确保关键功能有替代访问方式
