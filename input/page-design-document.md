# PandaHabit 页面设计文档

## 1. 概述

PandaHabit 是一款华丽游戏风格的习惯养成应用，采用中国风视觉元素，以熊猫伙伴为核心角色。本文档描述了应用程序的页面结构、设计原则和主要组件。

本应用采用多语言支持，所有页面的静态文本都通过 useLocalizedView 钩子从本地化服务获取，支持中文和英文界面。

## 2. 设计原则

### 2.1 视觉风格

- **华丽游戏风格**：采用精美的游戏界面设计，包括装饰性边框、精致图标和动画效果
- **中国风元素**：融入水墨、竹叶、金光等中国传统视觉元素
- **熊猫主题**：以熊猫为核心角色，贯穿整个应用程序

### 2.2 用户体验原则

- **直观易用**：界面简洁明了，操作流程直观
- **即时反馈**：用户操作后提供即时视觉和音效反馈
- **渐进式引导**：逐步引导用户了解功能，避免信息过载
- **奖励机制**：完成任务后提供丰富的奖励和成就系统

### 2.3 响应式设计

- **移动优先**：以移动设备为主要目标平台
- **自适应布局**：适应不同屏幕尺寸和方向
- **触摸友好**：按钮和交互元素设计适合触摸操作

## 3. 页面结构

### 3.1 主页 (HomePage)

**功能**：应用程序的入口点，展示用户概览和熊猫伙伴状态

**主要组件**：
- WelcomeSection：欢迎用户，显示当前日期和时间
- PandaSection：展示熊猫伙伴及其状态
- MoodsSection：显示用户心情记录和统计

**设计特点**：
- 竹叶装饰边框
- 水墨风格背景
- 熊猫动画效果

### 3.2 任务页面 (TasksPage)

**功能**：管理用户的任务和习惯

**主要组件**：
- TaskManager：任务管理器，包含任务列表和过滤器
- AnimatedTaskList：动画任务列表，显示任务卡片
- TaskForm：创建和编辑任务的表单

**设计特点**：
- 任务卡片采用卷轴设计
- 完成任务时的金光特效
- 任务优先级视觉区分

### 3.3 能力页面 (AbilitiesPage)

**功能**：展示和管理熊猫伙伴的能力

**主要组件**：
- AbilityTree：能力树，展示能力之间的关系
- AbilityCard：能力卡片，显示能力详情
- AbilityUnlockModal：解锁能力的模态框

**设计特点**：
- 树状结构展示能力关系
- 已解锁和未解锁能力的视觉区分
- 解锁动画效果

### 3.4 挑战页面 (ChallengesPage)

**功能**：展示和管理用户挑战

**主要组件**：
- ChallengeList：挑战列表，显示挑战卡片
- ChallengeFilter：挑战过滤器，按状态、类型和难度过滤
- ChallengeCard：挑战卡片，显示挑战详情和进度

**设计特点**：
- 挑战卡片采用华丽边框设计
- 进度条采用中国风元素
- 挑战完成时的庆祝动画

### 3.5 及时奖励页面 (TimelyRewardsPage)

**功能**：展示和管理及时奖励和幸运抽奖

**主要组件**：
- TimelyRewardList：及时奖励列表，显示奖励卡片
- TimelyRewardCard：及时奖励卡片，显示奖励详情和进度
- LuckyDraw：幸运抽奖组件，使用幸运点进行抽奖

**设计特点**：
- 奖励卡片采用金色边框设计
- 幸运抽奖采用转盘动画
- 奖励获取时的特效动画

### 3.6 设置页面 (SettingsPage)

**功能**：管理应用程序设置和用户偏好

**主要组件**：
- LanguageSelector：语言选择器
- ThemeSelector：主题选择器
- NotificationSettings：通知设置
- AccountSettings：账户设置

**设计特点**：
- 简洁的设置界面
- 分类组织设置项
- 即时应用设置变更

## 4. 共享组件

### 4.1 导航组件 (Navigation)

**功能**：在不同页面之间导航

**设计特点**：
- 底部导航栏，适合移动设备
- 图标和文字结合
- 当前页面高亮显示

### 4.2 模态框组件 (Modal)

**功能**：显示弹出内容

**设计特点**：
- 半透明背景遮罩
- 动画进入和退出效果
- 支持点击外部区域关闭

### 4.3 卷轴对话框 (ScrollDialog)

**功能**：以卷轴形式显示重要信息

**设计特点**：
- 古代卷轴设计
- 装饰性边框和纹理
- 展开和收起动画

### 4.4 奖励模态框 (RewardModal)

**功能**：展示获得的奖励

**设计特点**：
- 华丽的金色边框
- 奖励展示动画
- 粒子特效

### 4.5 熊猫头像 (PandaAvatar)

**功能**：显示熊猫伙伴

**设计特点**：
- 根据状态变化表情和动作
- 互动动画效果
- 装饰性边框

## 5. 动画系统

### 5.1 页面过渡动画

- 页面进入：淡入和上移
- 页面退出：淡出和下移
- 页面切换：交叉淡入淡出

### 5.2 元素动画

- 按钮：悬停放大，点击缩小
- 卡片：悬停轻微上浮，添加阴影
- 列表项：进入时序列动画

### 5.3 特效动画

- 完成任务：金光特效
- 解锁能力：水墨扩散效果
- 获得奖励：粒子爆炸效果

## 6. 响应式设计策略

### 6.1 移动设备 (< 768px)

- 单列布局
- 底部导航栏
- 简化的卡片设计

### 6.2 平板设备 (768px - 1024px)

- 双列布局
- 侧边导航栏
- 更详细的卡片设计

### 6.3 桌面设备 (> 1024px)

- 多列布局
- 顶部导航栏
- 完整的卡片设计，包含更多信息

## 7. 主题系统

### 7.1 颜色主题

- **默认主题**：竹青绿为主色调，金色为强调色
- **夜间主题**：深蓝为主色调，银色为强调色
- **节日主题**：红色为主色调，金色为强调色

### 7.2 字体系统

- 标题：华丽的中文书法字体
- 正文：清晰易读的无衬线字体
- 强调：装饰性中文字体

### 7.3 间距系统

- 采用 8px 基础网格系统
- 移动设备使用更紧凑的间距
- 桌面设备使用更宽松的间距

## 8. 国际化支持

### 8.1 多语言实现

- 支持中文和英文界面
- 使用 useLocalizedView 钩子加载本地化内容
- 根据语言调整布局和字体大小

### 8.2 本地化内容服务

- 使用 localizedContentService 提供本地化内容
- 每个页面都有对应的 fetch 函数，如 fetchHomePageView、fetchSettingsPageView 等
- 本地化内容包括标签（labels）和数据（data）两部分

### 8.3 页面本地化实现

每个页面都遵循相同的本地化模式：

1. 导入 useLocalizedView 钩子和对应的 fetch 函数
2. 在组件中使用 useLocalizedView 获取本地化内容
3. 处理加载状态和错误状态
4. 使用获取到的标签渲染页面内容

示例代码：

```typescript
const {
  labels: pageLabels,
  isPending,
  isError,
  error,
  refetch
} = useLocalizedView<null, PageViewLabelsBundle>(
  'pageViewContent',
  fetchPageView
);

// 处理加载状态
if (isPending && !pageLabels) {
  return <LoadingSpinner variant="jade" text="加载页面内容..." />;
}

// 处理错误状态
if (isError && !pageLabels) {
  return (
    <div className="page-content">
      <ErrorDisplay error={error} title="页面错误" onRetry={refetch} />
    </div>
  );
}

// 使用标签渲染页面内容
return (
  <div>
    <h1>{pageLabels?.pageTitle || '默认标题'}</h1>
    {/* 其他页面内容 */}
  </div>
);
```

## 9. 总结

PandaHabit 的页面设计融合了华丽游戏风格和中国传统视觉元素，以熊猫伙伴为核心角色，通过精美的界面设计、流畅的动画效果和丰富的奖励机制，为用户提供愉悦的习惯养成体验。
